<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <!-- 

	-->
    <!-- ========================================== -->
	<Target Name="ClearProjectBin">
		<Message Text="--------------------------------------------------------" Importance="high" />
		<Message Text="Exec ClearProjectBin" Importance="high" />
		<ItemGroup>
			<CsProjFiles Include="$(RootDirectoryPath)\**\*.csproj"/>
		</ItemGroup>
		<ItemGroup>
			<CsProjFolders Include="@(CsProjFiles->'%(RelativeDir)/bin')"/>
			<CsProjFolders Include="@(CsProjFiles->'%(RelativeDir)/obj')"/>
		</ItemGroup>
		<PropertyGroup>
			<RmDirCommand Condition="$([MSBuild]::IsOsPlatform('Windows'))">rmdir /s /q</RmDirCommand>
			<RmDirCommand Condition="!$([MSBuild]::IsOsPlatform('Windows'))">rm -rf</RmDirCommand>
		</PropertyGroup>
		<Message Text="Clean: %(CsProjFolders.FullPath)" Importance="high"
		Condition="Exists(%(CsProjFolders.FullPath))"/>

		<Exec 
			WorkingDirectory="$(RootDirectoryPath)" 
			Command="$(RmDirCommand) &quot;%(CsProjFolders.FullPath)&quot;" Condition="Exists(%(CsProjFolders.FullPath))"/>
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)" 
			Command="$(RmDirCommand) &quot;%(CsProjFolders.FullPath)&quot;" Condition="Exists(%(CsProjFolders.FullPath))"/>
	</Target>
    <!-- ========================================== -->
	<Target Name="BuildControlsSample">
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Samples/ControlsSample" 
			Command="$(DotNetBuildCmd)" />
	</Target>		
    <!-- ========================================== -->
	<Target Name="RunControlsSample">
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Samples/ControlsSample" 
			Command="$(DotNetRunCmd)" />
	</Target>		
    <!-- ========================================== -->
	<Target Name="CopyArtefacts">
		<RemoveDir Directories="$(UI_PAL_ARTIFACTS_PATH)" Condition="Exists($(UI_PAL_ARTIFACTS_PATH))"/>
		<MakeDir Directories="$(UI_PAL_ARTIFACTS_PATH)"/>	
		<RemoveDir Directories="$(UI_PAL_B)" Condition="Exists($(UI_PAL_B))"/>
		<MakeDir Directories="$(UI_PAL_B)"/>	
		<ItemGroup>
					   <MySourceFiles Include="$(UI_PAL_BIN)\**\*.*"/>
		</ItemGroup>
		<Copy
			SourceFiles="@(MySourceFilesRelease)"
			DestinationFolder="$(UI_PAL_ARTIFACTS_PATH)\%(RecursiveDir)"	/>
		<Copy
			SourceFiles="@(MySourceFiles)"
			DestinationFolder="$(UI_PAL_B)\%(RecursiveDir)"	/>
	</Target>
    <!-- ========================================== -->
    <Target Name="InstallAlternetUI">
		<Message Text="================================" Importance="high" />
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)" 
			Command="find . -name &quot;*.sh&quot; -exec chmod +x {} \;" 
			Condition="$([MSBuild]::IsOsPlatform('Linux'))" />
			
		<CallTarget Targets="ClearProjectBin"/>
		<Message Text="--------------------------------------------------------" Importance="high" />
		<Message Text="Exec DownloadAndExtractWxWidgetsBin" Importance="high" />
		<CallTarget Targets="DownloadAndExtractWxWidgetsBin" Condition="!Exists($(WxWidgetsDirectory))"/>
		<Message Text="--------------------------------------------------------" Importance="high" />
		<Message Text="Exec BuildWxWidgets_Linux" Importance="high" />
        <CallTarget Targets="BuildWxWidgets_Linux" Condition="!Exists($(WxWidgetsGtkBuildDirectory))"/>
		<Message Text="--------------------------------------------------------" Importance="high" />
		<Message Text="Exec BuildWxWidgets_MacOS" Importance="high" />
        <CallTarget Targets="BuildWxWidgets_MacOS" Condition="!Exists($(WxWidgetsMacOSBuildDirectory))"/>
    <!-- ========================================== -->
		<Message Text="--------------------------------------------------------" Importance="high" />
		<Message Text="Exec Alternet.UI.Pal" Importance="high" />
		<CallTarget Targets="BuildNative_Windows"/>
		<CallTarget Targets="BuildNative_Unix"/>
    <!-- ========================================== -->
		<Message Text="--------------------------------------------------------" Importance="high" />
		<Message Text="Exec CopyArtefacts" Importance="high" />
		<CallTarget Targets="CopyArtefacts"/>
	<!-- ========================================== -->
		<Message Text="--------------------------------------------------------" Importance="high" />
		<Message Text="Exec Alternet.UI" Importance="high" />
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Alternet.UI" 
			Command="$(DotNetBuildDebugCmd)" />
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Alternet.UI" 
			Command="$(DotNetBuildReleaseCmd)" />
    <!-- ========================================== -->
		<Message Text="--------------------------------------------------------" Importance="high" />
		<Message Text="Exec Alternet.UI.Build.Tasks.ApiInfoCollector" Importance="high" />
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Alternet.UI.Build.Tasks/Alternet.UI.Build.Tasks.ApiInfoCollector" 
			Command="$(DotNetBuildDebugCmd)" />
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Alternet.UI.Build.Tasks/Alternet.UI.Build.Tasks.ApiInfoCollector" 
			Command="$(DotNetBuildReleaseCmd)" />
    <!-- ========================================== -->
		<Message Text="--------------------------------------------------------" Importance="high" />
		<Message Text="Exec Alternet.UI.Build.Tasks" Importance="high" />
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Alternet.UI.Build.Tasks" 
			Command="$(DotNetBuildDebugCmd)" />
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Alternet.UI.Build.Tasks" 
			Command="$(DotNetBuildReleaseCmd)" />
    <!-- ========================================== -->
		<Message Text="--------------------------------------------------------" Importance="high" />
		<Message Text="Exec Build ControlsSample" Importance="high" />
		<CallTarget Targets="BuildControlsSample"/>
		<CallTarget Targets="RunControlsSample"/>		
    <!-- ========================================== -->
    </Target>
    <!-- ========================================== -->
    <!-- ========================================== -->
</Project>

<!-- 
  
-->
