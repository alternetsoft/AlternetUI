<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <!-- 
	
	-->
    <!-- ========================================== -->
	<Target Name="CopyArtefacts">
		<RemoveDir
            Directories="$(UI_PAL_ARTIFACTS_PATH)" Condition="Exists($(UI_PAL_ARTIFACTS_PATH))"/>
		<MakeDir Directories="$(UI_PAL_ARTIFACTS_PATH)"/>	
		<ItemGroup>
					   <MySourceFiles Include="$(UI_PAL_BIN)\**\*.*"/>
		</ItemGroup>
		<Copy
			SourceFiles="@(MySourceFiles)"
			DestinationFolder="$(UI_PAL_ARTIFACTS_PATH)\%(RecursiveDir)"	/>
		<Copy
			SourceFiles="@(MySourceFiles)"
			DestinationFolder="$(RootDirectoryPath)\Source\Alternet.UI.Pal\%(RecursiveDir)"	/>
	</Target>
    <!-- ========================================== -->
    <Target Name="InstallAlternetUI">
		<Message Text="================================" Importance="high" />
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)" 
			Command="find . -name *.sh -exec chmod +x {} \;" 
			Condition="$([MSBuild]::IsOsPlatform('Linux'))" />
		<Message Text="--------------------------------------------------------" Importance="high" />
		<Message Text="Exec DownloadAndExtractWxWidgetsBin" Importance="high" />
		<CallTarget Targets="DownloadAndExtractWxWidgetsBin" Condition="!Exists($(WxWidgetsDirectory))"/>
		<Message Text="--------------------------------------------------------" Importance="high" />
		<Message Text="Exec BuildWxWidgets_Linux" Importance="high" />
        <CallTarget Targets="BuildWxWidgets_Linux" Condition="!Exists($(WxWidgetsGtkBuildDirectory))"/>
		<Message Text="--------------------------------------------------------" Importance="high" />
		<Message Text="Exec BuildWxWidgets_MacOS" Importance="high" />
        <CallTarget Targets="BuildWxWidgets_MacOS" Condition="!Exists($(WxWidgetsMacOSBuildDirectory))"/>
    <!-- ========================================== -->
		<Message Text="--------------------------------------------------------" Importance="high" />
		<Message Text="Exec Alternet.UI.Pal" Importance="high" />
		<CallTarget Targets="BuildNative_Windows"/>
		<CallTarget Targets="BuildNative_Unix"/>
    <!-- ========================================== -->
		<Message Text="--------------------------------------------------------" Importance="high" />
		<Message Text="Exec CopyArtefacts" Importance="high" />
		<CallTarget Targets="CopyArtefacts"/>
	<!-- ========================================== -->
		<Message Text="--------------------------------------------------------" Importance="high" />
		<Message Text="Exec Alternet.UI" Importance="high" />
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Alternet.UI" 
			Command="dotnet build --configuration Debug --nologo --property WarningLevel=0" />
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Alternet.UI" 
			Command="dotnet build --configuration Release --nologo --property WarningLevel=0" />
    <!-- ========================================== -->
		<Message Text="--------------------------------------------------------" Importance="high" />
		<Message Text="Exec Alternet.UI.Build.Tasks.ApiInfoCollector" Importance="high" />
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Alternet.UI.Build.Tasks/Alternet.UI.Build.Tasks.ApiInfoCollector" 
			Command="dotnet build --configuration Debug --nologo --property WarningLevel=0" />
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Alternet.UI.Build.Tasks/Alternet.UI.Build.Tasks.ApiInfoCollector" 
			Command="dotnet build --configuration Release --nologo --property WarningLevel=0" />
    <!-- ========================================== -->
		<Message Text="--------------------------------------------------------" Importance="high" />
		<Message Text="Exec Alternet.UI.Build.Tasks" Importance="high" />
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Alternet.UI.Build.Tasks" 
			Command="dotnet build --configuration Debug --nologo --property WarningLevel=0" />
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Alternet.UI.Build.Tasks" 
			Command="dotnet build --configuration Release --nologo --property WarningLevel=0" />
    <!-- ========================================== -->
		<Message Text="--------------------------------------------------------" Importance="high" />
		<Message Text="Exec Build ControlsSample" Importance="high" />
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Samples/ControlsSample" 
			Command="dotnet build --nologo --property WarningLevel=0" />
    <!-- ========================================== -->
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Samples/ControlsSample" 
			Command="dotnet run --nologo --property WarningLevel=0 --framework net6.0" />
    <!-- ========================================== -->
    </Target>
    <!-- ========================================== -->
	
    <!-- ========================================== -->
</Project>

<!-- 
  
-->
