<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <!-- 
	- Do not use OK.MSW.Build.PAL.bat
	- Do not use OK.LinuxOrMacOs.Build.Alternet.UI.Pal.sh
	-->

    <!-- ========================================== -->
	<Target Name="CopyArtefacts">
		<RemoveDir
            Directories="$(UI_PAL_ARTIFACTS_PATH)" Condition="Exists($(UI_PAL_ARTIFACTS_PATH))"/>
		<MakeDir Directories="$(UI_PAL_ARTIFACTS_PATH)"/>	
		<ItemGroup>
					   <MySourceFiles Include="$(UI_PAL_BIN)\**\*.*"/>
		</ItemGroup>
		<Copy
			SourceFiles="@(MySourceFiles)"
			DestinationFolder="$(UI_PAL_ARTIFACTS_PATH)\%(RecursiveDir)"	/>
	</Target>
    <!-- ========================================== -->
    <Target Name="InstallAlternetUI">
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)" 
			Command="find . -name *.sh -exec chmod +x {} \;" 
			Condition="$([MSBuild]::IsOsPlatform('Linux'))" />
			
		<CallTarget Targets="DownloadAndExtractWxWidgetsBin" Condition="!Exists($(WxWidgetsDirectory))"/>
        <CallTarget Targets="BuildWxWidgets_Linux" Condition="!Exists($(WxWidgetsGtkBuildDirectory))"/>
        <CallTarget Targets="BuildWxWidgets_MacOS" Condition="!Exists($(WxWidgetsMacOSBuildDirectory))"/>
    <!-- ========================================== -->
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Build/Alternet.UI.Pal" 
			Command="dotnet msbuild -property:Configuration=Release Alternet.UI.Pal.proj" />			
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Build/Alternet.UI.Pal" 
			Command="dotnet msbuild -property:Configuration=Debug Alternet.UI.Pal.proj" />			
    <!-- ========================================== -->
		<CallTarget Targets="CopyArtefacts"/>
	<!-- ========================================== -->
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Alternet.UI" 
			Command="dotnet build --configuration Debug --nologo --property WarningLevel=0" />
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Alternet.UI" 
			Command="dotnet build --configuration Release --nologo --property WarningLevel=0" />
    <!-- ========================================== -->
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Alternet.UI.Build.Tasks/Alternet.UI.Build.Tasks.ApiInfoCollector" 
			Command="dotnet build --configuration Debug --nologo --property WarningLevel=0" />
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Alternet.UI.Build.Tasks/Alternet.UI.Build.Tasks.ApiInfoCollector" 
			Command="dotnet build --configuration Release --nologo --property WarningLevel=0" />
    <!-- ========================================== -->
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Alternet.UI.Build.Tasks" 
			Command="dotnet build --configuration Debug --nologo --property WarningLevel=0" />
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Alternet.UI.Build.Tasks" 
			Command="dotnet build --configuration Release --nologo --property WarningLevel=0" />
    <!-- ========================================== -->
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Samples/ControlsSample" 
			Command="dotnet build --nologo --property WarningLevel=0" />
    <!-- ========================================== -->
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Samples/ControlsSample" 
			Command="dotnet run --nologo --property WarningLevel=0 --framework net6.0" />
    <!-- ========================================== -->
    </Target>
    <!-- ========================================== -->
</Project>

<!-- 
  
-->
