<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <!-- 
	- Do not use OK.MSW.Build.PAL.bat
	- Do not use OK.LinuxOrMacOs.Build.Alternet.UI.Pal.sh
	-->

    <!-- ========================================== -->
	<Target Name="CopyArtefactsWindows">
		<RemoveDir
            Directories="$(UI_PAL_WINDOWS_ARTIFACTS_PATH)" Condition="Exists($(UI_PAL_WINDOWS_ARTIFACTS_PATH))"/>
		<MakeDir Directories="$(UI_PAL_WINDOWS_ARTIFACTS_PATH)"/>	
		<ItemGroup>
					   <MySourceFilesWindows Include="$(UI_WINDOWS_PAL_BIN)\**\*.*"/>
		</ItemGroup>
		<Copy
			SourceFiles="@(MySourceFilesWindows)"
			DestinationFolder="$(UI_PAL_WINDOWS_ARTIFACTS_PATH)\%(RecursiveDir)"	/>
	</Target>
    <!-- ========================================== -->
	<Target Name="CopyArtefactsMacOS">
		<RemoveDir
            Directories="$(UI_PAL_MACOS_ARTIFACTS_PATH)" Condition="Exists($(UI_PAL_MACOS_ARTIFACTS_PATH))"/>
		<MakeDir Directories="$(UI_PAL_MACOS_ARTIFACTS_PATH)"/>	
		<ItemGroup>
					   <MySourceFilesMacOS Include="$(UI_MACOS_PAL_BIN)\**\*.*"/>
		</ItemGroup>
		<Copy
			SourceFiles="@(MySourceFilesMacOS)"
			DestinationFolder="$(UI_PAL_MACOS_ARTIFACTS_PATH)\%(RecursiveDir)"	/>
	</Target>
    <!-- ========================================== -->
	<Target Name="CopyArtefactsLinux">
		<RemoveDir
            Directories="$(UI_PAL_LINUX_ARTIFACTS_PATH)" Condition="Exists($(UI_PAL_LINUX_ARTIFACTS_PATH))"/>
		<MakeDir Directories="$(UI_PAL_LINUX_ARTIFACTS_PATH)"/>	
		<ItemGroup>
					   <MySourceFilesLinux Include="$(UI_LINUX_PAL_BIN)\**\*.*"/>
		</ItemGroup>
		<Copy
			SourceFiles="@(MySourceFilesLinux)"
			DestinationFolder="$(UI_PAL_LINUX_ARTIFACTS_PATH)\%(RecursiveDir)"	/>
	</Target>
    <!-- ========================================== -->
    <Target Name="InstallAlternetUI">
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)" 
			Command="find . -name *.sh -exec chmod +x {} \;" 
			Condition="$([MSBuild]::IsOsPlatform('Linux'))" />
			
		<CallTarget Targets="DownloadAndExtractWxWidgetsBin" Condition="!Exists($(WxWidgetsDirectory))"/>
        <CallTarget Targets="BuildWxWidgets_Linux" Condition="$([MSBuild]::IsOsPlatform('Linux'))"/>
        <CallTarget Targets="BuildWxWidgets_MacOS" Condition="$([MSBuild]::IsOsPlatform('OSX'))"/>
    <!-- ========================================== -->
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)" 
			Command=".Source\Build\Scripts\OK.LinuxOrMacOs.Build.Alternet.UI.Pal.sh" 
			Condition="!$([MSBuild]::IsOsPlatform('Windows'))" />			
    <!-- ========================================== -->
		<CallTarget Targets="CopyArtefactsLinux" Condition="$([MSBuild]::IsOsPlatform('Linux'))"/>
		<CallTarget Targets="CopyArtefactsMacOS" Condition="$([MSBuild]::IsOsPlatform('OSX'))"/>
    <!-- ========================================== -->
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Alternet.UI.Build.Tasks/Alternet.UI.Build.Tasks.ApiInfoCollector" 
			Command="dotnet build --nologo --property WarningLevel=0" />
    <!-- ========================================== -->
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Alternet.UI.Build.Tasks" 
			Command="dotnet build --nologo --property WarningLevel=0" />
	<!-- ========================================== -->
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)" 
			Command="Source\Build\Scripts\OK.MSW.Build.PAL.bat" 
			Condition="$([MSBuild]::IsOsPlatform('Windows'))"/>
	<!-- ========================================== -->
		<CallTarget Targets="CopyArtefactsWindows" Condition="$([MSBuild]::IsOsPlatform('Windows'))"/>
	<!-- ========================================== -->
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Alternet.UI" 
			Command="dotnet build --nologo --property WarningLevel=0" />
    <!-- ========================================== -->
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Samples/ControlsSample" 
			Command="dotnet build --nologo --property WarningLevel=0" />
    <!-- ========================================== -->
		<Exec 
			WorkingDirectory="$(RootDirectoryPath)/Source/Samples/ControlsSample" 
			Command="dotnet run --nologo --property WarningLevel=0 --framerwork net6.0" />
    <!-- ========================================== -->
    </Target>
    <!-- ========================================== -->
</Project>

<!-- 
  
-->
