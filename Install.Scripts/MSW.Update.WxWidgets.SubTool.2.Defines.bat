ECHO ===============================
ECHO ===============================

SETLOCAL EnableDelayedExpansion

set SCRIPT_HOME=%~dp0.

set PATH1="%SCRIPT_HOME%\..\External\wxWidgets\include\wx\msw"
set FILENAME="%PATH1%\setup.h"
set OLDFILENAME="%PATH1%\setup.h.old"

set DEFINE1="#define wxUSE_WEBVIEW_EDGE 0"
set DEFINE2="#define wxUSE_WEBVIEW_EDGE_STATIC 0"
set DEFINE3="#define wxUSE_LIBWEBP       1"
set CHANGETO1="#define wxUSE_WEBVIEW_EDGE 1"
set CHANGETO2="#define wxUSE_WEBVIEW_EDGE_STATIC 1"
set CHANGETO3="#define wxUSE_LIBWEBP       0"

cscript //NoLogo "Tools\sed.vbs" s/%DEFINE1%/%CHANGETO1% < %FILENAME% > "67496AD39FDA40DDAB40DCB3D762697A"
cscript //NoLogo "Tools\sed.vbs" s/%DEFINE2%/%CHANGETO2% < "67496AD39FDA40DDAB40DCB3D762697A" > "EB8FED127592426BBDB0EE4A43678743"
cscript //NoLogo "Tools\sed.vbs" s/%DEFINE3%/%CHANGETO3% < "EB8FED127592426BBDB0EE4A43678743" > "C8210889DC5C407C82F5D6532322739E"


IF EXIST %OLDFILENAME% (
  REM Backup file exists
) ELSE (
	COPY /Y %FILENAME% %OLDFILENAME%
)

MOVE /Y "C8210889DC5C407C82F5D6532322739E" %FILENAME%
del "EB8FED127592426BBDB0EE4A43678743"
del "67496AD39FDA40DDAB40DCB3D762697A"
